<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: rquery_optree Pages: 1 -->
<svg width="468pt" height="852pt"
 viewBox="0.00 0.00 467.67 851.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 847.6)">
<title>rquery_optree</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-847.6 463.671,-847.6 463.671,4 -4,4"/>
<!-- table_d -->
<g id="node1" class="node">
<title>table_d</title>
<polygon fill="#d3d3d3" stroke="#000000" points="211.5876,-843.5002 208.5876,-847.5002 187.5876,-847.5002 184.5876,-843.5002 93.0834,-843.5002 93.0834,-734.8998 211.5876,-734.8998 211.5876,-843.5002"/>
<text text-anchor="start" x="101.2096" y="-827" font-family="Times,serif" font-size="14.00" fill="#000000">table(d; </text>
<text text-anchor="start" x="101.2096" y="-810.2" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;subjectID,</text>
<text text-anchor="start" x="101.2096" y="-793.4" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;surveyCategory,</text>
<text text-anchor="start" x="101.2096" y="-776.6" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;assessmentTotal,</text>
<text text-anchor="start" x="101.2096" y="-759.8" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;irrelevantCol1,</text>
<text text-anchor="start" x="101.2096" y="-743" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;irrelevantCol2)</text>
</g>
<!-- node_2 -->
<g id="node2" class="node">
<title>node_2</title>
<polygon fill="#d3d3d3" stroke="#000000" points="274.5067,-649.2019 12.1643,-649.2019 12.1643,-653.2019 .1643,-653.2019 .1643,-607.9981 274.5067,-607.9981 274.5067,-649.2019"/>
<polyline fill="none" stroke="#000000" points=".1643,-649.2019 12.1643,-649.2019 "/>
<text text-anchor="start" x="8" y="-632.8" font-family="Times,serif" font-size="14.00" fill="#000000">extend(.,</text>
<text text-anchor="start" x="8" y="-616" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;probability := exp(assessmentTotal * 0.237))</text>
</g>
<!-- table_d&#45;&gt;node_2 -->
<g id="edge1" class="edge">
<title>table_d&#45;&gt;node_2</title>
<path fill="none" stroke="#000000" d="M147.2572,-734.8282C144.916,-709.7616 142.2221,-680.9189 140.2327,-659.619"/>
<polygon fill="#000000" stroke="#000000" points="143.7046,-659.1547 139.2898,-649.5236 136.735,-659.8057 143.7046,-659.1547"/>
<text text-anchor="middle" x="148.0855" y="-713.2" font-family="Times,serif" font-size="14.00" fill="#000000">.</text>
<polyline fill="none" stroke="#000000" points="149.8355,-709 146.3355,-709 145.6239,-717.3409 "/>
</g>
<!-- node_4 -->
<g id="node3" class="node">
<title>node_4</title>
<polygon fill="#d3d3d3" stroke="#000000" points="459.5067,-699.8019 197.1643,-699.8019 197.1643,-703.8019 185.1643,-703.8019 185.1643,-658.5981 459.5067,-658.5981 459.5067,-699.8019"/>
<polyline fill="none" stroke="#000000" points="185.1643,-699.8019 197.1643,-699.8019 "/>
<text text-anchor="start" x="193" y="-683.4" font-family="Times,serif" font-size="14.00" fill="#000000">extend(.,</text>
<text text-anchor="start" x="193" y="-666.6" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;probability := exp(assessmentTotal * 0.237))</text>
</g>
<!-- table_d&#45;&gt;node_4 -->
<g id="edge2" class="edge">
<title>table_d&#45;&gt;node_4</title>
<path fill="none" stroke="#000000" d="M211.7933,-750.7273C234.9164,-735.7653 260.8198,-719.0043 281.7361,-705.4702"/>
<polygon fill="#000000" stroke="#000000" points="283.878,-708.2531 290.3723,-699.8821 280.0752,-702.3761 283.878,-708.2531"/>
<text text-anchor="middle" x="274.0855" y="-713.2" font-family="Times,serif" font-size="14.00" fill="#000000">.</text>
<polyline fill="none" stroke="#000000" points="275.8355,-709 272.3355,-709 271.073,-712.3699 "/>
</g>
<!-- node_6 -->
<g id="node5" class="node">
<title>node_6</title>
<polygon fill="#d3d3d3" stroke="#000000" points="307.8513,-522.4 52.8197,-522.4 52.8197,-526.4 40.8197,-526.4 40.8197,-486.4 307.8513,-486.4 307.8513,-522.4"/>
<polyline fill="none" stroke="#000000" points="40.8197,-522.4 52.8197,-522.4 "/>
<text text-anchor="start" x="48.8276" y="-500.2" font-family="Times,serif" font-size="14.00" fill="#000000">natural_join(.1, .2, &#160;j= LEFT, by= subjectID)</text>
</g>
<!-- node_2&#45;&gt;node_6 -->
<g id="edge4" class="edge">
<title>node_2&#45;&gt;node_6</title>
<path fill="none" stroke="#000000" d="M143.5285,-607.8117C149.7011,-587.0917 159.2191,-555.142 166.0417,-532.2404"/>
<polygon fill="#000000" stroke="#000000" points="169.4641,-533.0107 168.965,-522.4276 162.7555,-531.0121 169.4641,-533.0107"/>
<text text-anchor="middle" x="163.5855" y="-573.8" font-family="Times,serif" font-size="14.00" fill="#000000">.1</text>
<polyline fill="none" stroke="#000000" points="168.8355,-569.6 158.3355,-569.6 153.2315,-575.2411 "/>
</g>
<!-- node_5 -->
<g id="node4" class="node">
<title>node_5</title>
<polygon fill="#d3d3d3" stroke="#000000" points="429.1881,-598.6019 207.4829,-598.6019 207.4829,-602.6019 195.4829,-602.6019 195.4829,-557.3981 429.1881,-557.3981 429.1881,-598.6019"/>
<polyline fill="none" stroke="#000000" points="195.4829,-598.6019 207.4829,-598.6019 "/>
<text text-anchor="start" x="203.4092" y="-582.2" font-family="Times,serif" font-size="14.00" fill="#000000">project(., tot_prob := sum(probability),</text>
<text text-anchor="start" x="203.4092" y="-565.4" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;g= subjectID)</text>
</g>
<!-- node_4&#45;&gt;node_5 -->
<g id="edge3" class="edge">
<title>node_4&#45;&gt;node_5</title>
<path fill="none" stroke="#000000" d="M320.2635,-658.2313C318.8556,-643.9838 316.9696,-624.8969 315.3903,-608.9143"/>
<polygon fill="#000000" stroke="#000000" points="318.8713,-608.5492 314.4049,-598.9418 311.9053,-609.2376 318.8713,-608.5492"/>
<text text-anchor="middle" x="322.0855" y="-624.4" font-family="Times,serif" font-size="14.00" fill="#000000">.</text>
<polyline fill="none" stroke="#000000" points="323.8355,-620.2 320.3355,-620.2 317.3745,-628.9945 "/>
</g>
<!-- node_5&#45;&gt;node_6 -->
<g id="edge5" class="edge">
<title>node_5&#45;&gt;node_6</title>
<path fill="none" stroke="#000000" d="M273.5276,-557.3024C256.0127,-547.9612 235.2648,-536.8956 217.2835,-527.3056"/>
<polygon fill="#000000" stroke="#000000" points="218.6351,-524.0598 208.1645,-522.4421 215.341,-530.2363 218.6351,-524.0598"/>
<text text-anchor="middle" x="261.5855" y="-535.6" font-family="Times,serif" font-size="14.00" fill="#000000">.2</text>
<polyline fill="none" stroke="#000000" points="266.8355,-531.4 256.3355,-531.4 256.7872,-548.3742 "/>
</g>
<!-- node_7 -->
<g id="node6" class="node">
<title>node_7</title>
<polygon fill="#d3d3d3" stroke="#000000" points="287.9892,-451.4019 72.6818,-451.4019 72.6818,-455.4019 60.6818,-455.4019 60.6818,-410.1981 287.9892,-410.1981 287.9892,-451.4019"/>
<polyline fill="none" stroke="#000000" points="60.6818,-451.4019 72.6818,-451.4019 "/>
<text text-anchor="start" x="68.5088" y="-435" font-family="Times,serif" font-size="14.00" fill="#000000">extend(.,</text>
<text text-anchor="start" x="68.5088" y="-418.2" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;probability := probability / tot_prob)</text>
</g>
<!-- node_6&#45;&gt;node_7 -->
<g id="edge6" class="edge">
<title>node_6&#45;&gt;node_7</title>
<path fill="none" stroke="#000000" d="M174.3355,-486.2067C174.3355,-478.8437 174.3355,-470.1321 174.3355,-461.8234"/>
<polygon fill="#000000" stroke="#000000" points="177.8356,-461.6463 174.3355,-451.6463 170.8356,-461.6464 177.8356,-461.6463"/>
<text text-anchor="middle" x="176.0855" y="-464.8" font-family="Times,serif" font-size="14.00" fill="#000000">.</text>
<polyline fill="none" stroke="#000000" points="177.8355,-460.6 174.3355,-460.6 174.3355,-468.8905 "/>
</g>
<!-- node_8 -->
<g id="node7" class="node">
<title>node_8</title>
<polygon fill="#d3d3d3" stroke="#000000" points="295.7438,-375.3003 64.9272,-375.3003 64.9272,-379.3003 52.9272,-379.3003 52.9272,-299.8997 295.7438,-299.8997 295.7438,-375.3003"/>
<polyline fill="none" stroke="#000000" points="52.9272,-375.3003 64.9272,-375.3003 "/>
<text text-anchor="start" x="61.1315" y="-358.6" font-family="Times,serif" font-size="14.00" fill="#000000">extend(.,</text>
<text text-anchor="start" x="61.1315" y="-341.8" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;row_number := row_number(),</text>
<text text-anchor="start" x="61.1315" y="-325" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;p= subjectID,</text>
<text text-anchor="start" x="61.1315" y="-308.2" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;o= probability DESC, surveyCategory)</text>
</g>
<!-- node_7&#45;&gt;node_8 -->
<g id="edge7" class="edge">
<title>node_7&#45;&gt;node_8</title>
<path fill="none" stroke="#000000" d="M174.3355,-410.1159C174.3355,-402.7923 174.3355,-394.2166 174.3355,-385.5777"/>
<polygon fill="#000000" stroke="#000000" points="177.8356,-385.4786 174.3355,-375.4786 170.8356,-385.4786 177.8356,-385.4786"/>
<text text-anchor="middle" x="176.0855" y="-388.4" font-family="Times,serif" font-size="14.00" fill="#000000">.</text>
<polyline fill="none" stroke="#000000" points="177.8355,-384.2 174.3355,-384.2 174.3355,-392.8254 "/>
</g>
<!-- node_9 -->
<g id="node8" class="node">
<title>node_9</title>
<polygon fill="#d3d3d3" stroke="#000000" points="240.8192,-265.0019 119.8518,-265.0019 119.8518,-269.0019 107.8518,-269.0019 107.8518,-223.7981 240.8192,-223.7981 240.8192,-265.0019"/>
<polyline fill="none" stroke="#000000" points="107.8518,-265.0019 119.8518,-265.0019 "/>
<text text-anchor="start" x="116.0941" y="-248.6" font-family="Times,serif" font-size="14.00" fill="#000000">select_rows(.,</text>
<text text-anchor="start" x="116.0941" y="-231.8" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;row_number &lt;= 1)</text>
</g>
<!-- node_8&#45;&gt;node_9 -->
<g id="edge8" class="edge">
<title>node_8&#45;&gt;node_9</title>
<path fill="none" stroke="#000000" d="M174.3355,-299.9606C174.3355,-291.7637 174.3355,-283.1824 174.3355,-275.2834"/>
<polygon fill="#000000" stroke="#000000" points="177.8356,-275.0353 174.3355,-265.0353 170.8356,-275.0353 177.8356,-275.0353"/>
<text text-anchor="middle" x="176.0855" y="-278.4" font-family="Times,serif" font-size="14.00" fill="#000000">.</text>
<polyline fill="none" stroke="#000000" points="177.8355,-274.2 174.3355,-274.2 174.3355,-282.4709 "/>
</g>
<!-- node_10 -->
<g id="node9" class="node">
<title>node_10</title>
<polygon fill="#d3d3d3" stroke="#000000" points="273.9487,-188.6019 86.7223,-188.6019 86.7223,-192.6019 74.7223,-192.6019 74.7223,-147.3981 273.9487,-147.3981 273.9487,-188.6019"/>
<polyline fill="none" stroke="#000000" points="74.7223,-188.6019 86.7223,-188.6019 "/>
<text text-anchor="start" x="82.5291" y="-172.2" font-family="Times,serif" font-size="14.00" fill="#000000">rename(.,</text>
<text text-anchor="start" x="82.5291" y="-155.4" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;c(diagnosis = surveyCategory))</text>
</g>
<!-- node_9&#45;&gt;node_10 -->
<g id="edge9" class="edge">
<title>node_9&#45;&gt;node_10</title>
<path fill="none" stroke="#000000" d="M174.3355,-223.5234C174.3355,-215.9436 174.3355,-207.2093 174.3355,-198.9453"/>
<polygon fill="#000000" stroke="#000000" points="177.8356,-198.8514 174.3355,-188.8514 170.8356,-198.8514 177.8356,-198.8514"/>
<text text-anchor="middle" x="176.0855" y="-202" font-family="Times,serif" font-size="14.00" fill="#000000">.</text>
<polyline fill="none" stroke="#000000" points="177.8355,-197.8 174.3355,-197.8 174.3355,-205.9935 "/>
</g>
<!-- node_11 -->
<g id="node10" class="node">
<title>node_11</title>
<polygon fill="#d3d3d3" stroke="#000000" points="281.2409,-112.2019 79.4301,-112.2019 79.4301,-116.2019 67.4301,-116.2019 67.4301,-70.9981 281.2409,-70.9981 281.2409,-112.2019"/>
<polyline fill="none" stroke="#000000" points="67.4301,-112.2019 79.4301,-112.2019 "/>
<text text-anchor="start" x="75.3828" y="-95.8" font-family="Times,serif" font-size="14.00" fill="#000000">select_columns(.,</text>
<text text-anchor="start" x="75.3828" y="-79" font-family="Times,serif" font-size="14.00" fill="#000000"> &#160;&#160;subjectID, diagnosis, probability)</text>
</g>
<!-- node_10&#45;&gt;node_11 -->
<g id="edge10" class="edge">
<title>node_10&#45;&gt;node_11</title>
<path fill="none" stroke="#000000" d="M174.3355,-147.1234C174.3355,-139.5436 174.3355,-130.8093 174.3355,-122.5453"/>
<polygon fill="#000000" stroke="#000000" points="177.8356,-122.4514 174.3355,-112.4514 170.8356,-122.4514 177.8356,-122.4514"/>
<text text-anchor="middle" x="176.0855" y="-125.6" font-family="Times,serif" font-size="14.00" fill="#000000">.</text>
<polyline fill="none" stroke="#000000" points="177.8355,-121.4 174.3355,-121.4 174.3355,-129.5935 "/>
</g>
<!-- node_12 -->
<g id="node11" class="node">
<title>node_12</title>
<polygon fill="#d3d3d3" stroke="#000000" points="241.1149,-36 119.5561,-36 119.5561,-40 107.5561,-40 107.5561,0 241.1149,0 241.1149,-36"/>
<polyline fill="none" stroke="#000000" points="107.5561,-36 119.5561,-36 "/>
<text text-anchor="start" x="115.4459" y="-13.8" font-family="Times,serif" font-size="14.00" fill="#000000">orderby(., subjectID)</text>
</g>
<!-- node_11&#45;&gt;node_12 -->
<g id="edge11" class="edge">
<title>node_11&#45;&gt;node_12</title>
<path fill="none" stroke="#000000" d="M174.3355,-70.7061C174.3355,-63.1413 174.3355,-54.4661 174.3355,-46.3668"/>
<polygon fill="#000000" stroke="#000000" points="177.8356,-46.1932 174.3355,-36.1933 170.8356,-46.1933 177.8356,-46.1932"/>
<text text-anchor="middle" x="176.0855" y="-49.2" font-family="Times,serif" font-size="14.00" fill="#000000">.</text>
<polyline fill="none" stroke="#000000" points="177.8355,-45 174.3355,-45 174.3355,-53.2997 "/>
</g>
</g>
</svg>

